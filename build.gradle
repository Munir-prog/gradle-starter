/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.3/samples
 */


println "config phase"
println "gradle id: ${gradle.hashCode()}"
println "root: ${rootProject.hashCode()}, ${project.hashCode()}, ${gradle.rootProject.hashCode()}"


// task = new DefaultTask
//task("hello")

// tasks.findByName("hello").
// 1
//hello.description = "Hello task"
//hello.group = "dmdev"

//2
//hello.configure(Closure closure)
//hello {
//    println "config phase. Task hello"
//    description = "Hello task2"
//    group = "dmdev2"
//}

//3
//task hello {
//    println "config phase. Task hello"
//    description = "Hello task2"
//    group = "dmdev2"
//}

//4

task hello (description: "Hello task", group: "dmdev") {
    println "config phase. Task hello"

    doLast {
        println "Execution phase, Action 1"
    }

    doFirst {
        println "Execution phase, Action 2"
    }

    doLast {
        println "Execution phase, Action 3"
    }

    println "task: $description, group: $group, actions: $actions.size"
    println "path task: ${path}"
}

task first {
    doLast {
        println "Task 1"
    }
}

task second {
    doLast {
        println "Task 2"
    }
}

task third {
    doLast {
        println "Task 3"
    }
}

task fourth {
//    dependsOn()
    doLast {
        println "Task 4"
    }
}

// 2 <---- 4

//fourth.dependsOn second
//second.dependsOn first
//second.finalizedBy third


fourth.dependsOn first
fourth.dependsOn second
fourth.dependsOn third

first.mustRunAfter second
//second.shouldRunAfter first

gradle.taskGraph.whenReady { graph ->
    println "--- Graph:"
    graph.allTasks.each {
        println "${it.name}"
    }
}
